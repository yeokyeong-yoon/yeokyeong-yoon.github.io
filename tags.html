---
layout: default
title: Tags & Categories
permalink: /tags/
---

<div class="tags-page">
  <div class="filter-bar">
    <input type="text" class="search-input" placeholder="Search posts by title, tag, or category...">
    <div class="active-filters"></div>
  </div>

  <div class="filter-section">
    <div class="filter-list">
      {% assign categories = site.categories | sort %}
      {% for category in categories %}
        <button class="filter-btn category-tag" data-filter="category-{{ category[0] | slugify }}">#{{ category[0] }}</button>
      {% endfor %}
      
      {% assign tags = site.tags | sort %}
      {% for tag in tags %}
        <button class="filter-btn tag" data-filter="tag-{{ tag[0] | slugify }}">#{{ tag[0] }}</button>
      {% endfor %}
    </div>
  </div>

  <div class="posts-container">
    {% for post in site.posts %}
      <div class="post-item" 
           data-categories="{% for category in post.categories %}category-{{ category | slugify }} {% endfor %}"
           data-tags="{% for tag in post.tags %}tag-{{ tag | slugify }} {% endfor %}">
        <h3 class="post-title">
          <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
        </h3>
        <div class="post-meta">
          <span class="post-date">{{ post.date | date: "%Y년 %m월 %d일" }}</span>
          <div class="post-filters">
            {% for category in post.categories %}
              <span class="category-tag" data-filter="category-{{ category | slugify }}">#{{ category }}</span>
            {% endfor %}
            {% for tag in post.tags %}
              <span class="tag" data-filter="tag-{{ tag | slugify }}">#{{ tag }}</span>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.querySelector('.search-input');
  const filterButtons = document.querySelectorAll('.filter-btn');
  const postItems = document.querySelectorAll('.post-item');
  const activeFilters = document.querySelector('.active-filters');
  const activeFilterSet = new Set();

  // Search functionality
  searchInput.addEventListener('input', filterPosts);

  // Filter button click handling
  filterButtons.forEach(button => {
    button.addEventListener('click', function() {
      const filter = this.dataset.filter;
      
      if (activeFilterSet.has(filter)) {
        activeFilterSet.delete(filter);
        this.classList.remove('active');
        removeActiveFilter(filter);
      } else {
        activeFilterSet.add(filter);
        this.classList.add('active');
        addActiveFilter(filter, this.textContent);
      }
      
      filterPosts();
    });
  });

  // Post filtering logic
  function filterPosts() {
    const searchTerm = searchInput.value.toLowerCase();
    
    postItems.forEach(post => {
      const title = post.querySelector('.post-title').textContent.toLowerCase();
      const categories = post.dataset.categories;
      const tags = post.dataset.tags;
      
      const matchesSearch = title.includes(searchTerm);
      const matchesFilters = activeFilterSet.size === 0 || 
        Array.from(activeFilterSet).some(filter => 
          categories.includes(filter) || tags.includes(filter)
        );

      post.style.display = matchesSearch && matchesFilters ? 'block' : 'none';
    });
  }

  // Active filter management
  function addActiveFilter(filter, text) {
    const filterElement = document.createElement('span');
    filterElement.className = 'active-filter';
    filterElement.textContent = text;
    filterElement.dataset.filter = filter;
    filterElement.addEventListener('click', () => {
      activeFilterSet.delete(filter);
      filterElement.remove();
      document.querySelector(`[data-filter="${filter}"]`).classList.remove('active');
      filterPosts();
    });
    activeFilters.appendChild(filterElement);
  }

  function removeActiveFilter(filter) {
    const filterElement = activeFilters.querySelector(`[data-filter="${filter}"]`);
    if (filterElement) {
      filterElement.remove();
    }
  }
});
</script> 